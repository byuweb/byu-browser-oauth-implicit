{"version":3,"file":"implicit-grant.min.js","sources":["../src/log.js","../node_modules/@byuweb/browser-oauth/constants.js","../node_modules/cookie/index.js","../node_modules/local-storage-fallback/lib/CookieStorage.js","../node_modules/local-storage-fallback/lib/isSupported.js","../node_modules/local-storage-fallback/lib/MemoryStorage.js","../node_modules/local-storage-fallback/lib/index.js","../src/local-storage.js","../node_modules/js-sha256/src/sha256.js","../src/provider.js","../src/implicit-grant.js"],"sourcesContent":["const LEVEL_TRACE = { priority: 0, name: \"trace\", run: handleTrace };\nconst LEVEL_DEBUG = { priority: 1, name: \"debug\", run: handleDebug };\nconst LEVEL_INFO = { priority: 10, name: \"info\", run: handleInfo };\nconst LEVEL_ERROR = { priority: 100, name: \"error\", run: handleError };\n\nconst ALL_LEVELS = [LEVEL_TRACE, LEVEL_DEBUG, LEVEL_INFO, LEVEL_ERROR];\nconst DEFAULT_LEVEL = LEVEL_ERROR;\n\nexport function debug(...args) {\n  log(LEVEL_DEBUG, ...args);\n}\n\nexport function info(...args) {\n  log(LEVEL_INFO, ...args);\n}\n\nexport function error(...args) {\n  log(LEVEL_ERROR, ...args);\n}\n\nexport function debugf(format, ...args) {\n  logf(LEVEL_DEBUG, format, ...args);\n}\n\nexport function infof(format, ...args) {\n  logf(LEVEL_INFO, format, ...args);\n}\n\nexport function errorf(format, ...args) {\n  logf(LEVEL_ERROR, format, ...args);\n}\n\nfunction logf(level, format, ...args) {\n  if (!shouldLog(level)) {\n    return;\n  }\n  level.run(\n    `[byu-browser-oauth-implicit] [${level.name}] (${getFormattedTime()}) ${format}`,\n    ...args\n  );\n}\n\nfunction log(level, ...args) {\n  if (!shouldLog(level)) {\n    return;\n  }\n  level.run(\n    \"[byu-browser-oauth-implicit]\",\n    `[${level.name}]`,\n    `(${getFormattedTime()})`,\n    ...args\n  );\n}\n\nfunction getFormattedTime() {\n  const now = new Date();\n  const h24 = String(now.getHours()).padStart(2, '0');\n  const min = String(now.getMinutes()).padStart(2, '0');\n  const sec = String(now.getSeconds()).padStart(2, '0');\n  const millis = String(now.getMilliseconds()).padStart(3, '0');\n\n  return `${h24}:${min}:${sec},${millis}${formatTimezone(now)}`;\n}\n\nfunction formatTimezone(date) {\n  const offset = date.getTimezoneOffset();\n  if (offset === 0) {\n    return 'Z';\n  }\n  const nonNegative = offset >= 0;\n  const absOffset = Math.abs(offset);\n\n  // Positive whole offset hours\n  const hourInt = Math.floor(absOffset / 60);\n  const hourDone = String(hourInt).padStart(2, '0')\n  const sign = (nonNegative ? '+' : '-');\n  const minDone = String(absOffset % 60).padStart(2, '0');\n\n  return `${sign}${hourDone}${minDone}`;\n}\n\nfunction shouldLog(level) {\n  return level.priority >= currentLevel().priority;\n}\n\nfunction currentLevel() {\n  const name = levelAttr() || levelGlobalVar();\n  if (!name) {\n    return DEFAULT_LEVEL;\n  }\n  const lower = name.toLowerCase();\n  return (\n    ALL_LEVELS.find(function(l) {\n      return l.name === lower;\n    }) || DEFAULT_LEVEL\n  );\n}\n\nfunction levelAttr() {\n  return document.documentElement.getAttribute(\"byu-oauth-logging\");\n}\n\nfunction levelGlobalVar() {\n  const o = window.byuOAuth || {};\n  return o.logging;\n}\n\nfunction handleTrace(...args) {\n  if (console.trace) {\n    console.trace(...args);\n  } else {\n    console.log(...args);\n  }\n}\n\nfunction handleDebug(...args) {\n  console.log(...args);\n}\n\nfunction handleInfo(...args) {\n  if (console.info) {\n    console.info(...args);\n  } else {\n    console.log(...args);\n  }\n}\n\nfunction handleError(...args) {\n  if (console.error) {\n    console.error(...args);\n  } else {\n    console.log(...args);\n  }\n}\n","export const EVENT_PREFIX = 'byu-browser-oauth';\n\nexport const EVENT_STATE_CHANGE = `${EVENT_PREFIX}-state-changed`;\nexport const EVENT_LOGIN_REQUESTED = `${EVENT_PREFIX}-login-requested`;\nexport const EVENT_LOGOUT_REQUESTED = `${EVENT_PREFIX}-logout-requested`;\nexport const EVENT_REFRESH_REQUESTED = `${EVENT_PREFIX}-refresh-requested`;\nexport const EVENT_CURRENT_INFO_REQUESTED = `${EVENT_PREFIX}-current-info-requested`;\n\nexport const STATE_INDETERMINATE = 'indeterminate';\nexport const STATE_UNAUTHENTICATED = 'unauthenticated';\nexport const STATE_AUTHENTICATED = 'authenticated';\nexport const STATE_AUTHENTICATING = 'authenticating';\nexport const STATE_REFRESHING = 'refreshing';\nexport const STATE_EXPIRED = 'expired';\nexport const STATE_ERROR = 'error';\n\n","/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var pairs = str.split(pairSplitRegExp);\n  var dec = opt.decode || decode;\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i];\n    var eq_idx = pair.indexOf('=');\n\n    // skip things that don't look like key=value\n    if (eq_idx < 0) {\n      continue;\n    }\n\n    var key = pair.substr(0, eq_idx).trim()\n    var val = pair.substr(++eq_idx, pair.length).trim();\n\n    // quoted values\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n\n    // only assign once\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n    if (isNaN(maxAge)) throw new Error('maxAge should be a Number');\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.hasCookies = hasCookies;\n\nvar _cookie = require('cookie');\n\nvar _cookie2 = _interopRequireDefault(_cookie);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar prefix = 'lS_';\n\nvar CookieStorage = function () {\n  function CookieStorage() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CookieStorage);\n\n    this.cookieOptions = Object.assign({ path: '/' }, options);\n    prefix = options.prefix === undefined ? prefix : options.prefix;\n  }\n\n  _createClass(CookieStorage, [{\n    key: 'getItem',\n    value: function getItem(key) {\n      var cookies = _cookie2.default.parse(document.cookie);\n      if (!cookies || !cookies.hasOwnProperty(prefix + key)) {\n        return null;\n      }\n      return cookies[prefix + key];\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem(key, value) {\n      document.cookie = _cookie2.default.serialize(prefix + key, value, this.cookieOptions);\n      return value;\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key) {\n      var options = Object.assign({}, this.cookieOptions, { maxAge: -1 });\n      document.cookie = _cookie2.default.serialize(prefix + key, '', options);\n      return null;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      var cookies = _cookie2.default.parse(document.cookie);\n      for (var key in cookies) {\n        if (key.indexOf(prefix) === 0) {\n          this.removeItem(key.substr(prefix.length));\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return CookieStorage;\n}();\n\nexports.default = CookieStorage;\nfunction hasCookies() {\n  var storage = new CookieStorage();\n\n  try {\n    var TEST_KEY = '__test';\n    storage.setItem(TEST_KEY, '1');\n    var value = storage.getItem(TEST_KEY);\n    storage.removeItem(TEST_KEY);\n\n    return value === '1';\n  } catch (e) {\n    return false;\n  }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isSupported;\n\nvar _CookieStorage = require('./CookieStorage');\n\nvar TEST_KEY = '__test';\n\nfunction hasStorage(name) {\n  try {\n    var storage = window[name];\n    storage.setItem(TEST_KEY, '1');\n    storage.removeItem(TEST_KEY);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction isSupported() {\n  var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'localStorage';\n\n  var storage = String(name).replace(/storage$/i, '').toLowerCase();\n\n  if (storage === 'local') {\n    return hasStorage('localStorage');\n  }\n\n  if (storage === 'session') {\n    return hasStorage('sessionStorage');\n  }\n\n  if (storage === 'cookie') {\n    return (0, _CookieStorage.hasCookies)();\n  }\n\n  if (storage === 'memory') {\n    return true;\n  }\n\n  throw new Error('Storage method `' + name + '` is not available.\\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MemoryStorage = function () {\n  function MemoryStorage() {\n    _classCallCheck(this, MemoryStorage);\n\n    this._data = {};\n  }\n\n  _createClass(MemoryStorage, [{\n    key: \"getItem\",\n    value: function getItem(key) {\n      return this._data.hasOwnProperty(key) ? this._data[key] : null;\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      return this._data[key] = String(value);\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(key) {\n      return delete this._data[key];\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      return this._data = {};\n    }\n  }]);\n\n  return MemoryStorage;\n}();\n\nexports.default = MemoryStorage;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MemoryStorage = exports.CookieStorage = exports.isSupported = exports.storage = undefined;\n\nvar _isSupported = require('./isSupported');\n\nvar _isSupported2 = _interopRequireDefault(_isSupported);\n\nvar _CookieStorage = require('./CookieStorage');\n\nvar _CookieStorage2 = _interopRequireDefault(_CookieStorage);\n\nvar _MemoryStorage = require('./MemoryStorage');\n\nvar _MemoryStorage2 = _interopRequireDefault(_MemoryStorage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar storage = null;\n\nif ((0, _isSupported2.default)('localStorage')) {\n  // use localStorage\n  exports.storage = storage = window.localStorage;\n} else if ((0, _isSupported2.default)('sessionStorage')) {\n  // use sessionStorage\n  exports.storage = storage = window.sessionStorage;\n} else if ((0, _isSupported2.default)('cookieStorage')) {\n  // use cookies\n  exports.storage = storage = new _CookieStorage2.default();\n} else {\n  // use memory\n  exports.storage = storage = new _MemoryStorage2.default();\n}\n\nexports.default = storage;\nexports.storage = storage;\nexports.isSupported = _isSupported2.default;\nexports.CookieStorage = _CookieStorage2.default;\nexports.MemoryStorage = _MemoryStorage2.default;","/*\n *  @license\n *    Copyright 2018 Brigham Young University\n *\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\n *    you may not use this file except in compliance with the License.\n *    You may obtain a copy of the License at\n *\n *        http://www.apache.org/licenses/LICENSE-2.0\n *\n *    Unless required by applicable law or agreed to in writing, software\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *    See the License for the specific language governing permissions and\n *    limitations under the License.\n */\n\n\"use strict\";\n\nimport storage from 'local-storage-fallback';\n// During initial page load, Firefox \"LocalStorage\" is wonky if in Private Browsing.\n// Fortunately, the \"OAuth State\" data is tiny (one date and one 16-character string),\n// so it won't hit any Cookie size limitations.\n// With those factors in mind, we intentionally downgrade to Cookie storage for initial OAuth data storage\nimport { CookieStorage } from 'local-storage-fallback';\n\nconst cookie = new CookieStorage();\n\nexport class StorageHandler {\n\n  saveOAuthState(clientId, state) {\n    cookie.setItem(getKey(clientId), JSON.stringify(state));\n  }\n\n  getOAuthState(clientId) {\n    const result = cookie.getItem(getKey(clientId));\n    if (!result) {\n      return null;\n    }\n    return JSON.parse(result);\n  }\n\n  clearOAuthState(clientId) {\n    cookie.removeItem(getKey(clientId));\n  }\n\n  saveSessionState(clientId, state) {\n    storage.setItem(getSessionKey(clientId), JSON.stringify(state));\n  }\n\n  getSessionState(clientId) {\n    const key = getSessionKey(clientId);\n    const stored = storage.getItem(key);\n    if (!stored) {\n      return null;\n    }\n    return JSON.parse(stored);\n  }\n\n  clearSessionState(clientId) {\n    storage.removeItem(getSessionKey(clientId));\n  }\n}\n\nfunction getKey(clientId) {\n  return 'oauth-state-' + encodeURIComponent(clientId);\n}\n\nfunction getSessionKey(clientId) {\n  return getKey(clientId) + '-active-session';\n}\n\n","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","/*\n *  @license\n *    Copyright 2018 Brigham Young University\n *\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\n *    you may not use this file except in compliance with the License.\n *    You may obtain a copy of the License at\n *\n *        http://www.apache.org/licenses/LICENSE-2.0\n *\n *    Unless required by applicable law or agreed to in writing, software\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *    See the License for the specific language governing permissions and\n *    limitations under the License.\n */\n\"use strict\";\n\nimport * as log from './log.js';\nimport * as authn from '@byuweb/browser-oauth/constants.js';\nimport {StorageHandler} from \"./local-storage.js\";\n// NOTE: not using browser `crypto` module, because `crypto.subtle` isn't available when the browser isn't in HTTPS,\n// and our development environments usually use plain HTTP. We're only doing a single one-way hash, so performance\n// isn't a big deal\nimport sha256Lib from 'js-sha256'\nconst sha256 = sha256Lib.sha256\n\nlet SINGLETON_INSTANCE;\nlet BASE_URL;\n\nconst CHILD_IFRAME_ID = 'byu-oauth-implicit-grant-refresh-iframe'\nconst STORED_STATE_LIFETIME = 5 * 60 * 1000; // 5 minutes (in milliseconds)\nconst EXPIRATION_BUFFER = (5 * 60) + 5; // 5 minutes + 5 seconds (in seconds)\nexport const IG_STATE_AUTO_REFRESH_FAILED = 'implicit-grant-auto-refresh-failed'\n\nexport class ImplicitGrantProvider {\n  constructor(config, window, document, storageHandler = new StorageHandler()) {\n    log.debug('initializing provider with config', config);\n    this.config = config;\n    this.window = window;\n    this.document = document;\n    this.storageHandler = storageHandler;\n    this._listeners = {};\n\n    BASE_URL = this.config.baseUrl.replace(/\\/+$/, '') // strip trailing slash(es)\n\n    this.store = Object.freeze({\n      state: authn.STATE_INDETERMINATE,\n      user: null,\n      token: null,\n      error: null\n    });\n    log.debug('initialized provider');\n  }\n\n  _changeState(state, user, token, error) {\n    logStateChange(state, user, token, error);\n    this.store = Object.freeze({\n      state, user, token, error\n    });\n    _dispatchEvent(this, authn.EVENT_STATE_CHANGE, this.store);\n  }\n\n  _checkPopupOpener() {\n    try {\n      const origin = this.window.opener.location.origin\n      if (origin === (new URL(this.config.callbackUrl)).origin) { // Origins match\n        return this.window.opener\n      }\n    } catch (e) {\n      // Failed to get window.opener.location.origin, so we must have been opened\n      // from a different origin.\n      // Fall through to the \"return false\" outside this try/catch block\n    }\n    return false\n  }\n\n  _checkIframeOpener() {\n    try {\n      const iframe = this.window.parent.document.getElementById(CHILD_IFRAME_ID)\n      if (iframe && iframe.contentWindow === this.window) {\n        return iframe\n      }\n    } catch (e) {\n      // Failed to access window.parent info, so we must be in an iframe from a different\n      // origin.\n      // Fall through to the \"return false\" outside this try/catch block\n    }\n    return false\n  }\n\n  // Separate state change listener, because state change events\n  // might come from child iframe/popup window\n  handleStateChange({ state, user, token, source }) {\n    log.debug('in handleStateChange', state);\n\n    const opener = this._checkPopupOpener()\n    // If this is a popup\n    if (opener) {\n      // We're inside a child re-authentication popup\n\n      if (source) {\n        // event was triggered by a child, so ignore since we're inside a child\n        return\n      }\n\n      log.debug('dispatching event to parent');\n      // Pass event along to parent\n      _dispatchEvent(opener, authn.EVENT_STATE_CHANGE, { state, token, user, source: 'popup' })\n\n      if (state === authn.STATE_AUTHENTICATED) {\n        // delete self now that authentication is complete\n        log.info('closing self');\n        this.window.close()\n      }\n\n      return\n    }\n\n    const iframe = this._checkIframeOpener()\n    // If we're inside a \"refresh\" iframe\n    if (iframe) {\n      if (source) {\n        // event was triggered by a child, so ignore since we're inside a child\n        return\n      }\n\n      log.debug('dispatching event to parent');\n      // Pass event along to parent\n      _dispatchEvent(this.window.parent, authn.EVENT_STATE_CHANGE, { state, token, user, source: 'iframe' })\n\n      if (state === authn.STATE_AUTHENTICATED) {\n        // delete self now that authentication is complete\n        log.info('removing child iframe');\n        iframe.parentNode.removeChild(iframe)\n      }\n\n      return\n    }\n\n    this._maybeUpdateStoredSession(state, user, token);\n\n    if (state === authn.STATE_AUTHENTICATED) {\n      this._checkExpired(token.expiresAt.getTime())\n    }\n  }\n\n  async startup() {\n    ensureOnlyInstance(this);\n    log.info('starting up');\n    this.listen();\n    this._changeState(authn.STATE_INDETERMINATE);\n\n    const location = this._location;\n\n    if (this.isAuthenticationCallback(location)) {\n      log.debug('handling authentication callback');\n      this._changeState(authn.STATE_AUTHENTICATING);\n      try {\n        const {state, user, token, error} = await _handleAuthenticationCallback(\n          this.config,\n          location,\n          this.storageHandler\n        );\n        this._changeState(state, user, token, error);\n      } catch (err) {\n        log.error('OAuth Error', err);\n        this._changeState(authn.STATE_ERROR, undefined, undefined, err);\n      }\n    } else if (this.hasStoredSession()) {\n      log.debug('Has stored session');\n      this._updateStateFromStorage();\n    } else {\n      log.debug('no authentication present');\n      this._changeState(authn.STATE_UNAUTHENTICATED);\n    }\n    return this;\n  }\n\n  _checkExpired(expirationTimeInMs) {\n    const expiresInMs = expirationTimeInMs - Date.now()\n\n    log.debug(`checking expiration time; expires in ${expiresInMs} ms, ${new Date(expirationTimeInMs)}`);\n\n    if (expiresInMs > (30 * 1000)) { // 30 second buffer before token actually expires\n      if (this.__expirationTask) {\n        clearTimeout(this.__expirationTask);\n      }\n      // Simply using setTimeout for an hour in the future\n      // doesn't work; setTimeout isn't that precise over that long of a period.\n      // So re-check every five seconds until we're past the expiration time\n      this.__expirationTask = setTimeout(() =>  {\n        this.__expirationTask = null;\n        this._checkExpired(expirationTimeInMs);\n      }, 5000);\n\n      return;\n    }\n\n    if (this.config.autoRefreshOnTimeout) {\n      this.startRefresh('iframe');\n    } else {\n      // We don't have auto-refresh enabled, so flag the token as expired and let the application handle it.\n      this._changeState(authn.STATE_EXPIRED, this.store.user, this.store.token);\n    }\n  }\n\n  get _location() {\n    return this.window.location;\n  }\n\n  isAuthenticationCallback(location) {\n    const isCallbackUrl = location.href.indexOf(this.config.callbackUrl) === 0;\n    const hasCode = location.search && location.search.includes('code=') && location.search.includes('state=')\n\n    return !!(isCallbackUrl && hasCode)\n  }\n\n  hasStoredSession() {\n    return !!this.storageHandler.getSessionState(this.config.clientId);\n  }\n\n  shutdown() {\n    log.info('shutting down');\n    this.unlisten();\n    this._changeState(authn.STATE_INDETERMINATE);\n    cleanupOnlyInstance(this);\n  }\n\n  listen() {\n    log.debug('setting up event listeners');\n    _listenTo(this, authn.EVENT_LOGIN_REQUESTED, this.startLogin);\n    _listenTo(this, authn.EVENT_LOGOUT_REQUESTED, this.startLogout);\n    _listenTo(this, authn.EVENT_REFRESH_REQUESTED, this.startRefresh);\n    _listenTo(this, authn.EVENT_CURRENT_INFO_REQUESTED, this.handleCurrentInfoRequest);\n    _listenTo(this, authn.EVENT_STATE_CHANGE, this.handleStateChange);\n  }\n\n  unlisten() {\n    log.debug('tearing down event listeners');\n    _unlistenTo(this, authn.EVENT_LOGIN_REQUESTED);\n    _unlistenTo(this, authn.EVENT_LOGOUT_REQUESTED);\n    _unlistenTo(this, authn.EVENT_REFRESH_REQUESTED);\n    _unlistenTo(this, authn.EVENT_CURRENT_INFO_REQUESTED);\n    _unlistenTo(this, authn.EVENT_STATE_CHANGE);\n  }\n\n  startLogin(displayType = 'window') {\n    log.infof('Starting login. mode=%s', displayType);\n    const {clientId, callbackUrl} = this.config;\n    const csrf = randomString();\n    const codeVerifier = randomString(128);\n    // challenge is base64-encoded SHA256 hash of codeVerifier\n    const codeChallenge = btoa(String.fromCharCode(...sha256.array(codeVerifier)))\n      .replace(/\\+/g, '-')\n      .replace(/\\//g, '_')\n      .replace(/=/g, '')\n\n    const storedState = _prepareStoredState(Date.now() + STORED_STATE_LIFETIME, csrf, codeVerifier, {});\n    this.storageHandler.saveOAuthState(this.config.clientId, storedState);\n\n    const loginUrl = `${BASE_URL}/authorize?response_type=code&client_id=${clientId}&redirect_uri=${encodeURIComponent(callbackUrl)}&scope=openid&state=${csrf}&code_challenge=${codeChallenge}&code_challenge_method=S256`;\n    log.debug('computed login url of', loginUrl);\n\n    if (!displayType || displayType == 'window') {\n      log.info(`Redirecting user to '${loginUrl}'`);\n      this.window.location = loginUrl;\n      return\n    } else if (displayType === 'popup') {\n      log.info('launching popup at', loginUrl);\n      this.window.open(loginUrl)\n      return\n    }\n\n    log.info('Setting up hidden refresh iframe at', loginUrl);\n    // last option: displayType == 'iframe'\n    let iframe = this.document.getElementById(CHILD_IFRAME_ID)\n    if (iframe) {\n      iframe.parentNode.removeChild(iframe)\n    }\n    iframe = this.document.createElement('iframe')\n    iframe.onload = () => {\n      let html = null\n      try {\n        html = iframe.contentWindow.document.body.innerHTML\n      } catch (err) {\n        // intentional do-nothing\n      }\n      if (html === null) {\n        // Hidden-frame refresh failed. Remove frame and\n        // report problem\n        iframe.parentNode.removeChild(iframe)\n        this._changeState(IG_STATE_AUTO_REFRESH_FAILED, null, null)\n        this._changeState(authn.STATE_UNAUTHENTICATED, null, null)\n      }\n    }\n    iframe.id = CHILD_IFRAME_ID\n    iframe.src = loginUrl\n    iframe.style = 'display:none'\n    log.debug('appending iframe', iframe);\n    this.document.body.appendChild(iframe);\n  }\n\n  startLogout() {\n    log.info('starting logout');\n    this.storageHandler.clearSessionState(this.config.clientId);\n    // Need to ensure BOTH api.byu.edu and cas.byu.edu clean out their sessions\n    // With current config of those two sites, to have that full clean out AND a final \"where to go after logout\"\n    // redirect, we need to manually wrap them all together\n    const logoutRedirect = (this.config.logoutRedirect === undefined) ? this.config.callbackUrl : this.config.logoutRedirect\n    const casLogoutUrl = 'https://cas.byu.edu/cas/logout?service=' + encodeURIComponent(logoutRedirect)\n    const logoutUrl = `${BASE_URL}/logout?redirect_url=` + encodeURIComponent(casLogoutUrl);\n    log.info('logging out by redirecting to', logoutUrl);\n    this.window.location = logoutUrl;\n\n    //TODO: WSO2 Identity Server 5.1 allows us to revoke implicit tokens.  Once that's done, we'll need to do this.\n    // const url = `https://api.byu.edu/revoke`;\n\n    // const form = new URLSearchParams();\n    // form.set('token', store.token.bearer);\n    // form.set('client_id', config.clientId);\n    // form.set('token_type_hint', 'access_token');\n\n    // console.log('logout url', url);\n\n    // fetch(url, {\n    //     method: 'POST',\n    //     body: form,\n    //     // headers: {\n    //     //     'Content-Type': 'application/x-www-form-urlencoded'\n    //     // }\n    // }).then(result => {\n    //     console.log('done with logout', result);\n    // });\n  }\n\n  async startRefresh(displayType = 'iframe') {\n    log.infof('starting refresh. displayType=%s', displayType);\n\n    // Save copy of current info before triggering changeState\n    const token = Object.assign({}, this.store.token)\n    const user = Object.assign({}, this.store.user)\n\n    // Also pass yet another isolated copy to changeState\n    this._changeState(authn.STATE_REFRESHING, Object.assign({}, this.store.user), Object.assign({}, this.store.token));\n\n    if (displayType !== 'iframe') {\n      this.startLogin(displayType);\n      return;\n    }\n\n    // If we have a refresh token, then try that before doing the more complicated iframe version\n    if (!(token && token.refresh)) {\n      this.startLogin('iframe');\n      return;\n    }\n\n    const tokenUrl = `${BASE_URL}/token`;\n    const body = new URLSearchParams();\n    body.set('grant_type', 'refresh_token');\n    body.set('client_id', this.config.clientId);\n    body.set('refresh_token', token.refresh)\n\n    const resp = await fetch(tokenUrl, {\n      method: 'POST',\n      headers: new Headers({ 'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded' }),\n      body\n    });\n\n    if (resp.status !== 200) {\n      this.startLogin('iframe');\n      return;\n    }\n\n    const tokenInfo = await resp.json();\n    token.bearer = tokenInfo.access_token;\n    token.refresh = tokenInfo.refresh_token;\n    const expiresIn = tokenInfo.expires_in - EXPIRATION_BUFFER;\n    token.authorizationHeader = `Bearer ${token.bearer}`;\n    token.expiresAt = new Date(Date.now() + (expiresIn * 1000));\n\n    this._changeState(authn.STATE_AUTHENTICATED, user, token);\n  }\n\n  handleCurrentInfoRequest({callback}) {\n    log.debug('got current info request');\n    if (callback) {\n      callback(this.store);\n    }\n  }\n\n  _updateStateFromStorage() {\n    log.debug('updating state from local storage');\n    const serialized = this.storageHandler.getSessionState(this.config.clientId);\n    if (!serialized) {\n      log.debug('no stored state');\n      this._changeState(authn.STATE_UNAUTHENTICATED);\n      return;\n    }\n    const {user, token} = deserializeSessionState(serialized);\n    if (!user || !token) {\n      log.debug('no stored user or token');\n      this._changeState(authn.STATE_UNAUTHENTICATED);\n    } else if (token.expiresAt > new Date()) {\n      log.debug('found an unexpired saved session');\n      this._changeState(authn.STATE_AUTHENTICATED, user, token);\n    } else {\n      log.debug('stored session was expired');\n      this._changeState(authn.STATE_UNAUTHENTICATED);\n    }\n  }\n\n  _maybeUpdateStoredSession(state, user, token) {\n    log.debugf('updating stored session: state=%s hasUser=%s, hasToken=%s', state, !!user, !!token);\n    if (state === authn.STATE_UNAUTHENTICATED || state === authn.STATE_REFRESHING || state === authn.STATE_EXPIRED) {\n      log.debug('state is unauthenticated or expired, clearing stored session');\n      this.storageHandler.clearSessionState(this.config.clientId);\n    } else if (!!user && !!token) {\n      log.debug('storing session', redactUser(user), redactToken(token));\n      const serialized = serializeSessionState(user, token);\n      this.storageHandler.saveSessionState(this.config.clientId, serialized);\n    }\n  }\n}\n\nfunction serializeSessionState(user, token) {\n  const grouped = groupClaimPrefixes(token.rawUserInfo);\n\n  const smallerUserInfo = {\n    ro: grouped[CLAIMS_PREFIX_RESOURCE_OWNER],\n    cl: grouped[CLAIMS_PREFIX_CLIENT],\n    wso2: grouped[CLAIMS_PREFIX_WSO2],\n    o: grouped.other,\n  };\n\n  return {\n    ui: smallerUserInfo,\n    at: token.bearer,\n    rf: token.refresh,\n    ah: token.authorizationHeader,\n    ea: token.expiresAt.getTime()\n  };\n}\n\nfunction deserializeSessionState(state) {\n  const groupedUserInfo = {\n    [CLAIMS_PREFIX_RESOURCE_OWNER]: state.ui.ro,\n    [CLAIMS_PREFIX_CLIENT]: state.ui.cl,\n    [CLAIMS_PREFIX_WSO2]: state.ui.wso2,\n    other: state.ui.o,\n  }\n  const userInfo = ungroupClaimPrefixes(groupedUserInfo);\n\n  const user = _processUserInfo(userInfo);\n  const expiresAt = new Date(state.ea);\n  const token = _processTokenInfo({ userInfo, accessToken: state.at, expiresAt, authHeader: `Bearer ${state.at}`, refreshToken: state.rf });\n  return {user, token};\n}\n\nfunction _listenTo(provider, event, listener) {\n  if (provider._listeners.hasOwnProperty(event)) {\n    throw new Error('A listener is already registered for ' + event);\n  }\n  const obs = provider._listeners[event] = function (e) {\n    listener.call(provider, e.detail);\n  }.bind(provider);\n\n  provider.document.addEventListener(event, obs, false);\n}\n\nfunction _unlistenTo(provider, event) {\n  if (!provider._listeners.hasOwnProperty(event)) {\n    return;\n  }\n\n  provider.document.removeEventListener(event, provider._listeners[event], false);\n  delete provider._listeners[event];\n}\n\n\nfunction _dispatchEvent(provider, name, detail) {\n  let event;\n  if (typeof provider.window.CustomEvent === 'function') {\n    event = new CustomEvent(name, {detail});\n  } else {\n    event = provider.document.createEvent('CustomEvent');\n    event.initCustomEvent(name, true, false, detail);\n  }\n  provider.document.dispatchEvent(event);\n}\n\nasync function _handleAuthenticationCallback(config, location, storage) {\n  const searchParams = new URLSearchParams(location.search);\n\n  const oauthCsrfToken = searchParams.get('state');\n  const storedState = storage.getOAuthState(config.clientId);\n\n  storage.clearOAuthState(config.clientId);\n\n  log.debug('checking oauth state token');\n  const pageState = _validateAndGetStoredState(storedState, oauthCsrfToken);\n  const tokenInfo = await _fetchTokenInfo(searchParams.get('code'), config, storedState.v)\n\n  const accessToken = tokenInfo.access_token;\n  const refreshToken = tokenInfo.refresh_token;\n  const expiresIn = tokenInfo.expires_in - EXPIRATION_BUFFER;\n  const expiresAt = new Date(Date.now() + (expiresIn * 1000));\n  const authHeader = `Bearer ${accessToken}`;\n  log.debug('got token', redactBearerToken(accessToken), 'which expires in', expiresIn, 'seconds');\n\n  const userInfo = await _fetchUserInfo(authHeader);\n\n  const user = _processUserInfo(userInfo);\n  const token = _processTokenInfo({ userInfo, accessToken, expiresAt, authHeader, refreshToken });\n\n  return {state: authn.STATE_AUTHENTICATED, user, token};\n}\n\n\nasync function _fetchTokenInfo(code, config, codeVerifier) {\n  log.debug('Exchanging code for token');\n  const tokenUrl = `${BASE_URL}/token`;\n  const body = new URLSearchParams();\n  body.set('grant_type', 'authorization_code');\n  body.set('client_id', config.clientId);\n  body.set('redirect_uri', config.callbackUrl);\n  body.set('code', code);\n  body.set('code_verifier', codeVerifier)\n\n  const resp = await fetch(tokenUrl, {\n    method: 'POST',\n    headers: new Headers({ 'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded' }),\n    body\n  });\n\n  if (resp.status !== 200) {\n    const body = await resp.text();\n\n    log.error('Error getting OAuth User Info. Status Code:', resp.status, 'Response:\\n', body);\n    throw new OAuthError(\n      'unable-to-exchange-code-for-token',\n      'Unable to exchange code for token. Please try again.'\n    );\n  }\n\n  const json = await resp.json();\n  log.debug('successfully got user info', json);\n  return json;\n}\n\nasync function _fetchUserInfo(authHeader) {\n  const USER_INFO_URL = `${BASE_URL}/openid-userinfo/v1/userinfo?schema=openid`;\n  log.debug('fetching user info from', USER_INFO_URL);\n  const resp = await fetch(USER_INFO_URL, {\n    method: 'GET',\n    headers: new Headers({'Accept': 'application/json', 'Authorization': authHeader}),\n    mode: 'cors',\n  });\n\n  log.debug('got status', resp.status);\n\n  if (resp.status !== 200) {\n    const body = await resp.text();\n\n    if (resp.status === 403) {\n      log.debug('got forbidden error');\n      if (body.includes('<ams:code>900908</ams:code>')) {\n        log.debug('client app isn\\'t subscribed to OpenID UserInfo endpoint');\n        log.error(`DEVELOPER ERROR: You may not be subscribed to the OpenID UserInfo endpoint. Please visit https://api.byu.edu/store/apis/info?name=OpenID-Userinfo&version=v1&provider=BYU%2Fjmooreoa to subscribe.`);\n        throw new OAuthError(\n          'not-subscribed-to-user-info',\n          'This page has an authentication configuration error. Developers, see the console for details.'\n        );\n      } else {\n        log.error('invalid oauth bearer token');\n        throw new OAuthError(\n          'invalid-oauth-token',\n          'The provided authentication token is invalid. Please try again.'\n        );\n      }\n    }\n    log.error('Error getting OAuth User Info. Status Code:', resp.status, 'Response:\\n', body);\n    throw new OAuthError(\n      'unable-to-get-user-info',\n      'Unable to fetch user information. Please try again.'\n    );\n  }\n  const json = await resp.json();\n  log.debug('successfully got user info', json);\n  return json;\n}\n\nconst CLAIMS_PREFIX_RESOURCE_OWNER = 'http://byu.edu/claims/resourceowner_';\nconst CLAIMS_PREFIX_CLIENT = 'http://byu.edu/claims/client_';\nconst CLAIMS_PREFIX_WSO2 = 'http://wso2.org/claims/';\n\nconst CLAIMS_KNOWN_PREFIXES = [CLAIMS_PREFIX_CLIENT, CLAIMS_PREFIX_RESOURCE_OWNER, CLAIMS_PREFIX_WSO2];\n\nfunction groupClaimPrefixes(userInfo) {\n  const grouped = {\n    other: {}\n  };\n  for (const prefix of CLAIMS_KNOWN_PREFIXES) {\n    grouped[prefix] = {};\n  }\n  for (const key of Object.keys(userInfo)) {\n    const value = userInfo[key];\n    const prefix = CLAIMS_KNOWN_PREFIXES.find(it => key.startsWith(it));\n    if (prefix) {\n        grouped[prefix][key.substr(prefix.length)] = value;\n    } else {\n      grouped.other[key] = value;\n    }\n  }\n  return grouped;\n}\n\nfunction ungroupClaimPrefixes(grouped) {\n  const result = {};\n  for (const groupKey of CLAIMS_KNOWN_PREFIXES) {\n    const group = grouped[groupKey];\n    if (!group) continue;\n    for (const key of Object.keys(group)) {\n      result[groupKey + key] = group[key];\n    }\n  }\n  for (const other of Object.keys(grouped.other)) {\n    result[other] = grouped.other[other];\n  }\n  return result;\n}\n\nfunction getClaims(userInfo, prefix) {\n  return Object.keys(userInfo).filter(k => k.startsWith(prefix))\n    .reduce((agg, key) => {\n      agg[key.substr(prefix.length)] = userInfo[key];\n      return agg;\n    }, {});\n}\n\nfunction _processUserInfo(userInfo) {\n  const roClaims = getClaims(userInfo, CLAIMS_PREFIX_RESOURCE_OWNER);\n\n  const familyNamePosition = roClaims.surname_position;\n  const givenName = roClaims.preferred_first_name;\n  const familyName = roClaims.surname;\n\n  const displayName = familyNamePosition === 'F' ? `${familyName} ${givenName}` : `${givenName} ${familyName}`;\n\n  return {\n    personId: roClaims.person_id,\n    byuId: roClaims.byu_id,\n    netId: roClaims.net_id,\n    name: {\n      sortName: roClaims.sort_name,\n      displayName,\n      givenName,\n      familyName,\n      familyNamePosition,\n    },\n    rawUserInfo: userInfo\n  };\n}\n\nfunction _processTokenInfo({ userInfo, accessToken, expiresAt, authHeader, refreshToken }) {\n  const clientClaims = getClaims(userInfo, CLAIMS_PREFIX_CLIENT);\n  const wso2Claims = getClaims(userInfo, CLAIMS_PREFIX_WSO2);\n\n  return {\n    bearer: accessToken,\n    refresh: refreshToken,\n    authorizationHeader: authHeader,\n    expiresAt,\n    client: {\n      id: wso2Claims.client_id,\n      byuId: clientClaims.byu_id,\n      appName: wso2Claims.applicationname,\n    },\n    rawUserInfo: userInfo\n  };\n}\n\nfunction _validateAndGetStoredState(storedState, expectedCsrfToken) {\n  log.debug('validating stored state token. Expecting token', expectedCsrfToken, ', got state', storedState);\n  if (!storedState) {\n    log.error('no stored oauth login state');\n    throw new OAuthError('no-oauth-state', 'Your saved authentication information does not match. Please try again.');\n  }\n  const {e: stateExpiresString, c: storedCsrfToken, s: pageState} = storedState;\n\n  if (expectedCsrfToken !== storedCsrfToken) {\n    log.error('CSRF token mismatch')\n    throw new OAuthError(\n      'oauth-state-mismatch',\n      'Your saved authentication information does not match. Please try again.'\n    );\n  }\n\n  if (Number(stateExpiresString) < Date.now()) {\n    log.error('stored state has expired');\n    throw new OAuthError(\n      'oauth-state-expired',\n      'Your login attempt has timed out. Please try again.'\n    );\n  }\n\n  return pageState;\n}\n\nfunction _prepareStoredState(expires, csrfToken, codeVerifier, pageState) {\n  return {\n    e: expires,\n    c: csrfToken,\n    v: codeVerifier,\n    s: pageState,\n  }\n}\n\nclass OAuthError extends Error {\n  constructor(type, description, uri) {\n    super('OAuth Error: ' + description);\n    this.type = type;\n    this.description = description;\n    this.uri = uri;\n  }\n}\n\nconst allowableRandomChars = [...'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'];\nconst randomCharRangeConvert = allowableRandomChars.length / 2**8; // Using Uint8Array for getRandomValues\n\nfunction randomString(length) {\n  const randomArray = new Uint8Array(length || 24);\n  const crypto = window.crypto || window.msCrypto;\n  crypto.getRandomValues(randomArray);\n\n  return randomArray.reduce((str, cur) => str + allowableRandomChars[Math.floor(cur * randomCharRangeConvert)], '');\n}\n\nfunction logStateChange(state, user, token, error) {\n  const logParts = [\n    'state change:',\n    {\n      state,\n      user: redactUser(user),\n      token: token, //redactToken(token),\n      error: error\n    }\n  ];\n  if (error) {\n    log.error(...logParts);\n  } else {\n    log.info(...logParts);\n  }\n}\n\nfunction redactUser(u) {\n  if (!u) return undefined;\n  return {\n    netId: u.netId,\n    'rest-is-redacted': true\n  };\n}\n\nfunction redactToken(t) {\n  log.debug('redacting token', t);\n  if (!t) return undefined;\n  const {bearer, expiresAt, client} = t;\n  return {\n    bearer: redactBearerToken(bearer),\n    expiresAt: !!expiresAt ? expiresAt.toISOString() : null,\n    client,\n    'rest-is-redacted': true\n  }\n}\nfunction redactBearerToken(b) {\n  if (!b) return undefined;\n  return b.substring(0, 2) + '...redacted...' + b.substring(b.length - 2)\n}\n\nfunction ensureOnlyInstance(obj) {\n  if (SINGLETON_INSTANCE) {\n    const trace = SINGLETON_INSTANCE.___startupTrace;\n    throw new Error('There is already an instance of byu-oauth-implicit running!  Please call `#shutdown()` on that instance before starting a new one. Instance was started at:\\n' + trace);\n  }\n  obj.___startupTrace = new Error().stack;\n  SINGLETON_INSTANCE = obj;\n}\n\nfunction cleanupOnlyInstance(obj) {\n  SINGLETON_INSTANCE = null;\n}\n\nexport function __forceShutdown() {\n  if (SINGLETON_INSTANCE) {\n    SINGLETON_INSTANCE.shutdown();\n    cleanupOnlyInstance(SINGLETON_INSTANCE);\n  }\n}\n","/*\n * Copyright 2018 Brigham Young University\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IG_STATE_AUTO_REFRESH_FAILED, ImplicitGrantProvider } from \"./provider.js\";\nexport { IG_STATE_AUTO_REFRESH_FAILED }\n\nexport const DEFAULT_ISSUER = 'https://api.byu.edu';\nexport const DEFAULT_BASE_URL = 'https://api.byu.edu';\n\nexport const GLOBAL_CONFIG_KEY = 'byu-oauth-implicit-config';\n\n/**\n * @typedef {} ImplicitConfig\n * @prop {string} clientId\n * @prop {?string} issuer\n * @prop {?string} baseUrl\n * @prop {?string} callbackUrl\n * @prop {?boolean} requireAuthentication\n */\n\n/**\n * @param {ImplicitConfig|ImplicitConfig[]|undefined} cfgOrRules\n * @param location\n */\nexport async function configure(cfgOrRules, location = window.location) {\n  const cfg = resolveConfig(cfgOrRules, location);\n  const globalConfig = window[GLOBAL_CONFIG_KEY];\n\n  const config = Object.assign({\n    issuer: DEFAULT_ISSUER,\n    baseUrl: DEFAULT_BASE_URL,\n    callbackUrl: `${location.origin}${location.pathname}`,\n    autoRefreshOnTimeout: false\n  }, globalConfig, cfg);\n\n  if (!config.clientId) {\n    throw new Error('clientId must be specified in config');\n  }\n  const provider = new ImplicitGrantProvider(config, window, document);\n\n  return provider.startup();\n}\n\nfunction resolveConfig(rules, location) {\n  if (!rules) {\n    return {};\n  }\n\n  if ('clientId' in rules) {\n    return rules;\n  }\n\n  const keys = Object.keys(rules)\n    .filter(it => it.startsWith('https://') || it.startsWith('http://'));\n\n  if (keys.length === 0) {\n    return rules;\n  }\n\n  const key = keys\n    // order by length of key (most specific), descending\n    .sort((a, b) => b.length - a.length)\n    .find(it => location.href.startsWith(it));\n  if (key) {\n    return Object.assign({ callbackUrl: key }, rules[key]);\n  }\n  throw new Error(`Unable to match url [${location.href}] to one of [${keys}]`)\n}\n"],"names":["LEVEL_TRACE","priority","name","run","handleTrace","LEVEL_DEBUG","handleDebug","LEVEL_INFO","handleInfo","LEVEL_ERROR","handleError","ALL_LEVELS","DEFAULT_LEVEL","debug","args","log","info","error","debugf","format","logf","infof","level","shouldLog","getFormattedTime","now","Date","h24","String","getHours","padStart","min","getMinutes","sec","getSeconds","millis","getMilliseconds","formatTimezone","date","offset","getTimezoneOffset","absOffset","Math","abs","hourInt","floor","hourDone","sign","nonNegative","minDone","currentLevel","levelAttr","levelGlobalVar","lower","toLowerCase","find","l","document","documentElement","getAttribute","o","window","byuOAuth","logging","console","trace","EVENT_PREFIX","EVENT_STATE_CHANGE","EVENT_LOGIN_REQUESTED","EVENT_LOGOUT_REQUESTED","EVENT_REFRESH_REQUESTED","EVENT_CURRENT_INFO_REQUESTED","STATE_INDETERMINATE","STATE_UNAUTHENTICATED","STATE_AUTHENTICATED","STATE_AUTHENTICATING","STATE_REFRESHING","STATE_EXPIRED","STATE_ERROR","parse","serialize","decode","decodeURIComponent","encode","encodeURIComponent","pairSplitRegExp","fieldContentRegExp","str","options","TypeError","obj","opt","pairs","split","dec","i","length","pair","eq_idx","indexOf","key","substr","trim","val","slice","undefined","tryDecode","enc","test","value","maxAge","isNaN","Error","domain","path","expires","toUTCString","httpOnly","secure","sameSite","e","_classCallCheck","instance","Constructor","Object","defineProperty","exports","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","storage","CookieStorage","setItem","getItem","removeItem","_cookie2","__esModule","default","_interopRequireDefault","_cookie","prefix","arguments","cookieOptions","assign","cookies","cookie","hasOwnProperty","hasStorage","replace","_CookieStorage","hasCookies","MemoryStorage","_data","_isSupported2","_isSupported","_CookieStorage2","_MemoryStorage2","_MemoryStorage","localStorage","sessionStorage","StorageHandler","saveOAuthState","clientId","state","getKey","JSON","stringify","getOAuthState","result","clearOAuthState","saveSessionState","getSessionKey","getSessionState","stored","clearSessionState","Sha256","is224","sharedMemory","blocks","h0","h1","h2","h3","h4","h5","h6","h7","block","start","bytes","hBytes","finalized","hashed","first","HmacSha256","type","code","index","charCodeAt","ARRAY_BUFFER","constructor","ArrayBuffer","Uint8Array","Array","isArray","isView","update","array","oKeyPad","iKeyPad","b","call","inner","ERROR","WINDOW","root","JS_SHA256_NO_WINDOW","WEB_WORKER","self","NODE_JS","JS_SHA256_NO_NODE_JS","process","versions","node","global","COMMON_JS","JS_SHA256_NO_COMMON_JS","module","JS_SHA256_NO_ARRAY_BUFFER","HEX_CHARS","EXTRA","SHIFT","K","OUTPUT_TYPES","toString","JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW","buffer","createOutputMethod","outputType","message","createMethod","method","nodeWrap","create","crypto","eval","Buffer","algorithm","nodeMethod","createHash","digest","createHmacOutputMethod","createHmacMethod","notString","lastByteIndex","hash","finalize","j","s0","s1","maj","t1","t2","ch","ab","da","cd","bc","a","c","d","f","g","h","hex","arr","push","arrayBuffer","dataView","DataView","setUint32","innerHash","sha256","sha224","hmac","sha256Lib","SINGLETON_INSTANCE","BASE_URL","CHILD_IFRAME_ID","STORED_STATE_LIFETIME","EXPIRATION_BUFFER","IG_STATE_AUTO_REFRESH_FAILED","ImplicitGrantProvider","config","storageHandler","_listeners","baseUrl","store","freeze","authn","user","token","_changeState","logStateChange","_dispatchEvent","_checkPopupOpener","origin","opener","location","URL","callbackUrl","_checkIframeOpener","iframe","parent","getElementById","contentWindow","handleStateChange","source","close","parentNode","removeChild","_maybeUpdateStoredSession","_checkExpired","expiresAt","getTime","startup","ensureOnlyInstance","listen","_location","isAuthenticationCallback","_handleAuthenticationCallback","err","hasStoredSession","_updateStateFromStorage","expirationTimeInMs","expiresInMs","__expirationTask","clearTimeout","setTimeout","_this","autoRefreshOnTimeout","startRefresh","isCallbackUrl","href","hasCode","search","includes","shutdown","unlisten","cleanupOnlyInstance","_listenTo","startLogin","startLogout","handleCurrentInfoRequest","_unlistenTo","displayType","fromCharCode","csrf","randomString","codeVerifier","codeChallenge","btoa","storedState","_prepareStoredState","loginUrl","open","createElement","onload","html","body","innerHTML","_this2","id","src","style","appendChild","logoutRedirect","casLogoutUrl","logoutUrl","refresh","tokenUrl","URLSearchParams","set","resp","fetch","headers","Headers","status","tokenInfo","json","bearer","access_token","refresh_token","expiresIn","expires_in","authorizationHeader","callback","serialized","deserializeSessionState","redactUser","redactToken","serializeSessionState","grouped","groupClaimPrefixes","rawUserInfo","smallerUserInfo","ro","CLAIMS_PREFIX_RESOURCE_OWNER","cl","CLAIMS_PREFIX_CLIENT","wso2","CLAIMS_PREFIX_WSO2","other","ui","at","rf","ah","ea","groupedUserInfo","userInfo","ungroupClaimPrefixes","_processUserInfo","_processTokenInfo","accessToken","authHeader","refreshToken","provider","event","listener","obs","detail","bind","addEventListener","removeEventListener","CustomEvent","createEvent","initCustomEvent","dispatchEvent","searchParams","oauthCsrfToken","get","pageState","_validateAndGetStoredState","_fetchTokenInfo","v","redactBearerToken","_fetchUserInfo","text","OAuthError","USER_INFO_URL","mode","CLAIMS_KNOWN_PREFIXES","keys","it","startsWith","groupKey","group","getClaims","filter","k","reduce","agg","roClaims","familyNamePosition","surname_position","givenName","preferred_first_name","familyName","surname","displayName","personId","person_id","byuId","byu_id","netId","net_id","sortName","sort_name","clientClaims","wso2Claims","client","client_id","appName","applicationname","expectedCsrfToken","stateExpiresString","storedCsrfToken","s","Number","csrfToken","description","uri","allowableRandomChars","randomCharRangeConvert","randomArray","msCrypto","getRandomValues","cur","logParts","u","t","toISOString","substring","___startupTrace","stack","DEFAULT_ISSUER","DEFAULT_BASE_URL","GLOBAL_CONFIG_KEY","configure","cfgOrRules","cfg","resolveConfig","globalConfig","issuer","pathname","rules","sort"],"mappings":"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"}